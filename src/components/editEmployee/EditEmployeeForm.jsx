import { useEffect, useRef, useLayoutEffect } from "react";
import "./animation.js";
import { showForm, hideForm, resetForm } from "./animation.js";

const EditEmployeeForm = ({ isActive, id, onClick, onSubmit }) => {
  //object to store input value

  const refFirstName = useRef();
  const refLastName = useRef();
  const refSalary = useRef();
  const refLocation = useRef();

  const editForm = useRef();
  const editFormHeading = useRef();

  useLayoutEffect(() => {
    hideForm(editForm.current);
  }, []);

  useLayoutEffect(() => {
    if (isActive) {
      showForm(editForm.current, editFormHeading.current);
    } else resetForm(editForm.current);
  });

  function resetInput(fName, lName, salary, location) {
    fName.current.value = "";
    lName.current.value = "";
    salary.current.value = "";
    location.current.value = "";
  }

  function mergeAllInputsInObject(fName, lName, sal, loc) {
    const firstName = fName.current.value.trim();
    const lastName = lName.current.value.trim();
    const salary = sal.current.value.trim();
    const location = loc.current.value.trim();

    // in returning object also including id
    return { id, firstName, lastName, salary, location };
  }
  // src\svg\sprite.svg  S:\React Projects\employee-management\src\svg\sprite.svg
  return (
    <div
      ref={editForm}
      className="editForm bg-white absolute top-0 bottom-0 left-0 right-0 z-10"
    >
      <button
        onClick={onClick}
        className="absolute text-red-600 top-10 right-10  text-[50px] font-bold hover:scale-75 transition-all duration-300 "
      >
        x
      </button>

      <div className=" lg:py-8 lg:px-40 border-2 2xl:py-20  2xl:px-56  rounded-md shadow-2xl absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] ">
        <h2 className="text-green-400 mb-12 text-center underline">
          <span ref={editFormHeading} className="inline-block underline">
            Edit Form
          </span>
        </h2>
        <h3 className="mb-8">Your ID is {id}</h3>
        <form>
          <div className="entry first-name">
            <label htmlFor="first-name">First Name : </label>
            <input ref={refFirstName} type="text" id="first-name" />
          </div>
          <div className="entry last-name">
            <label htmlFor="last-name">Last Name : </label>
            <input ref={refLastName} type="text" id="last-name" />
          </div>
          <div className="entry salary">
            <label htmlFor="salary">Salary : </label>
            <input ref={refSalary} type="number" id="salary" />
          </div>
          <div className="entry location">
            <label htmlFor="location">Location : </label>
            <input ref={refLocation} type="text" id="location" />
          </div>
          <button
            onClick={(e) => {
              const obj = mergeAllInputsInObject(
                refFirstName,
                refLastName,
                refSalary,
                refLocation
              );
              resetInput(refFirstName, refLastName, refSalary, refLocation);
              resetForm(editForm.current);
              onClick();
              onSubmit(obj);
            }}
            type="button"
            className="btn btn--md btn-secondary mt-4 "
          >
            Submit
          </button>
        </form>
        <p className="text-sm text-gray-500 mt-5">
          <strong>Note-:</strong>Give values only in required fields rest you
          can leave blank!!!
        </p>
        <svg
          className="girl"
          width="259"
          height="407"
          viewBox="0 0 259 407"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="girl">
            <path
              id="Ellipse 97"
              d="M177.417 94.457C199.107 94.457 216.69 76.8739 216.69 55.184C216.69 33.4941 199.107 15.911 177.417 15.911C155.727 15.911 138.144 33.4941 138.144 55.184C138.144 76.8739 155.727 94.457 177.417 94.457Z"
              fill="#164326"
            />
            <path
              id="Path 630"
              d="M79.6813 391.209H62.4813L54.3003 324.883H79.6793L79.6813 391.209Z"
              fill="#FEB8B8"
            />
            <path
              id="Path 631"
              d="M50.2033 386.295H83.3663V407.176H29.3223C29.3223 401.638 31.5222 396.327 35.4382 392.411C39.3541 388.495 44.6653 386.295 50.2033 386.295V386.295Z"
              fill="#2F2E41"
            />
            <path
              id="Path 632"
              d="M52.8383 381.612L36.4323 376.463L48.4843 310.728L72.6983 318.328L52.8383 381.612Z"
              fill="#FEB8B8"
            />
            <path
              id="Path 633"
              d="M26.1743 368.1L57.8167 378.03L51.5645 397.953L0 381.771C0.821058 379.155 2.14939 376.726 3.90918 374.623C5.66897 372.52 7.82573 370.784 10.2563 369.515C12.6869 368.245 15.3438 367.467 18.0751 367.224C20.8065 366.982 23.559 367.279 26.1753 368.1V368.1L26.1743 368.1Z"
              fill="#2F2E41"
            />
            <path
              id="Path 634"
              d="M58.4333 355.145C57.6819 355.145 56.9367 355.009 56.2333 354.745L43.5783 350.002C42.158 349.465 40.9782 348.435 40.2537 347.1C39.5292 345.765 39.3083 344.215 39.6313 342.731C42.8163 328.41 53.6713 279.654 59.6153 253.503C66.6643 222.484 169.5 216.72 173.874 216.49L174.234 216.471L185.802 231.002C189.982 244.438 188.657 254.918 181.864 262.152C162.041 283.257 102.858 270.161 95.8014 268.504L64.3463 351.081C63.8879 352.277 63.0776 353.305 62.0225 354.031C60.9673 354.756 59.7169 355.145 58.4363 355.145H58.4333Z"
              fill="#2F2E41"
            />
            <path
              id="Path 635"
              d="M76.6673 364.964C75.9159 364.964 75.1706 364.828 74.4673 364.564L61.8163 359.82C60.3959 359.283 59.2159 358.253 58.4914 356.918C57.7669 355.583 57.5461 354.033 57.8693 352.549C61.0543 338.228 71.9093 289.472 77.8533 263.321C84.9023 232.302 187.738 226.538 192.112 226.308L192.472 226.289L204.036 240.824C208.216 254.26 206.891 264.74 200.098 271.974C180.276 293.074 121.092 279.983 114.035 278.325L82.5763 360.899C82.1179 362.095 81.3076 363.123 80.2524 363.849C79.1973 364.574 77.9468 364.963 76.6663 364.963L76.6673 364.964Z"
              fill="#2F2E41"
            />
            <path
              id="Path 637"
              d="M200.825 246.388C199.825 246.386 198.84 246.146 197.95 245.688C184.117 238.654 157.181 226.473 132.203 223.924C131.348 223.84 130.521 223.579 129.773 223.156C129.025 222.733 128.374 222.159 127.861 221.47C127.339 220.774 126.965 219.977 126.764 219.13C126.563 218.283 126.538 217.403 126.692 216.546C128.946 204.069 134.116 172.297 133.45 146.834C133.254 139.005 135.728 131.342 140.464 125.105C145.201 118.868 151.919 114.428 159.513 112.515V112.515C164.084 111.309 168.727 110.393 173.413 109.774C178.801 109.092 184.274 109.681 189.394 111.494C194.514 113.307 199.137 116.294 202.895 120.216C206.652 124.137 209.439 128.884 211.032 134.076C212.625 139.269 212.98 144.762 212.068 150.116C207.614 176.504 203.123 213.36 207.026 239.088C207.206 240.241 207.062 241.421 206.612 242.498C206.162 243.575 205.422 244.506 204.475 245.188C203.416 245.964 202.138 246.384 200.825 246.388V246.388Z"
              fill="#CCCCCC"
            />
            <path
              id="Path 638"
              d="M134.731 179.27C133.869 179.269 133.016 179.091 132.225 178.747L114.204 170.947C112.669 170.28 111.461 169.032 110.846 167.476C110.23 165.92 110.256 164.183 110.919 162.647L124.849 130.468C125.677 128.518 126.88 126.75 128.391 125.265C129.902 123.781 131.69 122.608 133.654 121.814C135.618 121.02 137.719 120.621 139.837 120.64C141.955 120.658 144.049 121.093 145.999 121.921C147.949 122.748 149.716 123.951 151.201 125.462C152.686 126.973 153.859 128.761 154.653 130.725C155.446 132.689 155.845 134.79 155.827 136.908C155.809 139.026 155.374 141.12 154.546 143.07C154.516 143.141 154.485 143.212 154.454 143.282L140.524 175.462C140.034 176.592 139.225 177.553 138.196 178.23C137.167 178.906 135.963 179.268 134.731 179.27Z"
              fill="#CCCCCC"
            />
            <path
              id="Ellipse 98"
              d="M175.982 98.827C195.008 98.827 210.432 83.4032 210.432 64.377C210.432 45.3508 195.008 29.927 175.982 29.927C156.956 29.927 141.532 45.3508 141.532 64.377C141.532 83.4032 156.956 98.827 175.982 98.827Z"
              fill="#FEB8B8"
            />
            <path
              id="Path 639"
              d="M140.912 47.448C157.23 57.4093 175.626 63.4708 194.669 65.161L189.002 58.372C193.128 59.8975 197.47 60.7595 201.865 60.926C204.066 60.9899 206.251 60.5369 208.246 59.6034C210.24 58.67 211.987 57.2821 213.348 55.551C214.459 53.7543 215.119 51.7156 215.272 49.6087C215.425 47.5018 215.066 45.3892 214.225 43.451C212.499 39.5839 209.811 36.2229 206.418 33.688C200.404 28.9307 193.307 25.7351 185.758 24.386C178.21 23.0369 170.445 23.5763 163.155 25.956C158.155 27.4503 153.676 30.323 150.233 34.245C146.967 38.274 140.68 41.864 142.352 46.773L140.912 47.448Z"
              fill="#164326"
            />
            <path
              id="Path 640"
              d="M179.062 18.4271C185.929 11.462 194.239 6.08683 203.407 2.68004C209.227 0.231991 215.609 -0.560171 221.85 0.391043C228.003 1.62904 233.821 5.88505 235.538 11.922C236.938 16.858 235.492 22.173 233.314 26.822C231.136 31.471 228.228 35.778 226.466 40.598C224.669 45.5163 224.128 50.8056 224.893 55.9858C225.659 61.166 227.706 66.073 230.849 70.2614C233.991 74.4498 238.131 77.7868 242.89 79.9697C247.65 82.1526 252.88 83.112 258.104 82.7611C252.059 83.5721 246.487 86.413 240.578 87.924C234.669 89.435 227.695 89.334 223.304 85.1C218.658 80.621 218.565 73.3391 218.79 66.8901L219.79 38.128C219.96 33.239 220.106 28.193 218.342 23.628C216.578 19.063 212.388 15.0681 207.496 15.1101C203.788 15.1411 200.507 17.388 197.533 19.603C194.559 21.818 191.412 24.1811 187.719 24.5111C184.026 24.8411 179.809 22.111 180.085 18.411"
              fill="#164326"
            />
            <path
              id="Path 641"
              d="M118.063 237.538C115.781 237.535 113.527 237.026 111.465 236.048C109.403 235.069 107.583 233.645 106.138 231.879C104.692 230.112 103.656 228.047 103.105 225.832C102.553 223.617 102.5 221.308 102.948 219.07C103.397 216.832 104.336 214.721 105.699 212.89C107.061 211.058 108.813 209.552 110.828 208.479C112.843 207.406 115.07 206.794 117.35 206.685C119.63 206.577 121.906 206.976 124.013 207.853V207.853C124.647 208.121 125.262 208.432 125.852 208.785L188.607 180.614L190.37 163.594L217.421 162.87L217.242 191.205C217.209 194.488 216.119 197.673 214.132 200.286C212.146 202.9 209.369 204.804 206.215 205.714L132.83 226.599C132.689 227.084 132.522 227.561 132.33 228.028C131.153 230.84 129.172 233.243 126.635 234.934C124.098 236.626 121.119 237.531 118.07 237.537L118.063 237.538Z"
              fill="#FEB8B8"
            />
            <path
              id="Path 642"
              d="M215.13 176.754C214.361 177.143 213.52 177.371 212.659 177.422L193.059 178.627C191.389 178.728 189.747 178.162 188.493 177.054C187.24 175.945 186.477 174.385 186.372 172.715L184.221 137.715C183.964 133.448 185.41 129.253 188.244 126.052C191.077 122.851 195.065 120.905 199.332 120.643C203.599 120.38 207.795 121.822 211 124.652C214.204 127.481 216.154 131.467 216.421 135.734L218.573 170.734C218.648 171.963 218.362 173.188 217.751 174.257C217.14 175.327 216.23 176.194 215.132 176.754H215.13Z"
              fill="#CCCCCC"
            />
            <path
              id="Rectangle 91"
              d="M175.663 231.258H58.5943C57.6123 231.258 56.8163 232.054 56.8163 233.036V239.298C56.8163 240.28 57.6123 241.076 58.5943 241.076H175.663C176.645 241.076 177.441 240.28 177.441 239.298V233.036C177.441 232.054 176.645 231.258 175.663 231.258Z"
              fill="#3F3D56"
            />
            <path
              id="Path 643"
              d="M11.8333 231.96V163.231C11.8362 160.814 12.7977 158.497 14.5068 156.788C16.2159 155.078 18.5332 154.117 20.9503 154.114H145.783C148.2 154.117 150.518 155.078 152.227 156.787C153.936 158.496 154.898 160.814 154.9 163.231V231.96C154.898 234.377 153.936 236.695 152.227 238.404C150.518 240.113 148.2 241.074 145.783 241.077H20.9503C18.5332 241.074 16.2159 240.113 14.5068 238.404C12.7977 236.694 11.8362 234.377 11.8333 231.96V231.96Z"
              fill="#3F3D56"
            />
            <path
              id="Ellipse 99"
              d="M84.8683 206.015C89.5163 206.015 93.2843 202.247 93.2843 197.599C93.2843 192.951 89.5163 189.183 84.8683 189.183C80.2203 189.183 76.4523 192.951 76.4523 197.599C76.4523 202.247 80.2203 206.015 84.8683 206.015Z"
              fill="white"
            />
          </g>
        </svg>
      </div>
    </div>
  );
};

export default EditEmployeeForm;
